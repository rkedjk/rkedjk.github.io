<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†—é–∫–∑–∞–∫ —Å —ç–º–æ–¥–∑–∏</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: white;
            color: black;
            text-align: center;
            margin: 0;
            padding: 0;
        }

        #message {
            font-size: 24px;
            margin-top: 20px;
            transition: opacity 1s; /* –ü–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
        }

        #backpack {
            width: 250px;
            height: auto;
            cursor: pointer;
            margin-top: 30px;
        }

        .emoji {
            font-size: 48px;
            position: absolute;
            cursor: grab;
            user-select: none;
            animation: appear 0.5s ease; /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–º–æ–¥–∑–∏ */
        }

        @keyframes appear {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @media (max-width: 600px) {
            #message {
                font-size: 18px;
            }

            #backpack {
                width: 180px;
            }

            .emoji {
                font-size: 36px;
            }
        }
    </style>
</head>
<body>

    <div id="message">–ù–∞–∂–º–∏ –Ω–∞ —Ä—é–∫–∑–∞–∫</div>
    <img id="backpack" src="backpack.svg" alt="–†—é–∫–∑–∞–∫">

    <script>
        const message = document.getElementById('message');
        const backpack = document.getElementById('backpack');
        let emojiCount = 0; // –°—á–µ—Ç—á–∏–∫ —ç–º–æ–¥–∑–∏

        // –ú–∞—Å—Å–∏–≤ –¥–µ–±–∏–ª—å–Ω—ã—Ö –∏ 18+ —ç–º–æ–¥–∑–∏
        const emojis = [
            "üòú", "üòù", "üòõ", "ü§™", "üòè", "üôÉ", "üí©", "üëÄ", "üçÜ", "üçë",
            "üòà", "üëø", "ü¶Ñ", "ü§°", "ü§ë", "üòπ", "üôà", "üòº", "üëÖ", "üíã",
            "ü§§", "ü•≥", "ü§≠", "üò¨", "üò≥", "ü¶∑","üßÄ","üçå"// –ö–∞–∂–¥–æ–µ —Ç—Ä–µ—Ç—å–µ —ç–º–æ–¥–∑–∏ –±—É–¥–µ—Ç –±–∞–Ω–∞–Ω–æ–º
        ];

        backpack.addEventListener('click', () => {
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —ç–º–æ–¥–∑–∏
            const emojiIndex = emojiCount % 3 === 2 ? emojis.length - 1 : Math.floor(Math.random() * (emojis.length - 1));
            const randomEmoji = emojis[emojiIndex];
            const emojiElement = document.createElement('div');
            emojiElement.classList.add('emoji');
            emojiElement.innerHTML = randomEmoji;
            document.body.appendChild(emojiElement);

            // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º —ç–º–æ–¥–∑–∏ –Ω–∞–¥ —Ä—é–∫–∑–∞–∫–æ–º
            const backpackRect = backpack.getBoundingClientRect();
            emojiElement.style.left = `${backpackRect.left + backpackRect.width / 2 - 24}px`;
            emojiElement.style.top = `${backpackRect.top + backpackRect.height / 2 - 24}px`;

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            message.innerHTML = "–ü–µ—Ä–µ–Ω–µ—Å–∏ –ø—Ä–µ–¥–º–µ—Ç";

            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
            let offsetX, offsetY;

            emojiElement.addEventListener('mousedown', (e) => {
                offsetX = e.clientX - emojiElement.getBoundingClientRect().left;
                offsetY = e.clientY - emojiElement.getBoundingClientRect().top;

                function moveAt(pageX, pageY) {
                    emojiElement.style.left = `${pageX - offsetX}px`;
                    emojiElement.style.top = `${pageY - offsetY}px`;
                }

                function onMouseMove(event) {
                    moveAt(event.pageX, event.pageY);
                }

                document.addEventListener('mousemove', onMouseMove);

                emojiElement.addEventListener('mouseup', () => {
                    document.removeEventListener('mousemove', onMouseMove);
                    // –ü–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
                    message.style.opacity = '0';
                    setTimeout(() => {
                        message.innerHTML = "–ù–∞–∂–º–∏ –Ω–∞ —Ä—é–∫–∑–∞–∫";
                        message.style.opacity = '1';
                    }, 1000); // –í—Ä–µ–º—è –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
                }, { once: true });
            });

            emojiCount++; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —ç–º–æ–¥–∑–∏
        });
    </script>

</body>
</html>
